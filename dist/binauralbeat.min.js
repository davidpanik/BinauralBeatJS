/*! binauralbeat 2013-05-17 */
(function(){window.BinauralBeat=function(){function e(e,t){var n,r,s,i;this.input=e.createGain(),this.output=e.createGain(),t=null!=t?t:{},this.frequency=null!=(n=t.frequency)?n:440,this.beatFrequency=null!=(r=t.beats)?r:5,this.waveType=null!=(s=t.waveType)?s:0,this.compressNodes=null!=(i=t.compressNodes)?i:!1,this._createInternalNodes(e),this._routeNodes(),this.setFrequency(this.frequency),this.setWaveType(this.waveType)}return e.SINE=0,e.SQUARE=1,e.SAWTOOTH=2,e.TRIANGLE=3,e.prototype._createInternalNodes=function(e){return this.leftChannel=e.createOscillator(),this.rightChannel=e.createOscillator(),this.channelMerger=e.createChannelMerger(),this.compressor=e.createDynamicsCompressor()},e.prototype._routeNodes=function(){return this.leftChannel.connect(this.channelMerger,0,0),this.rightChannel.connect(this.channelMerger,0,1),this.compressNodes?(this.input.connect(this.compressor),this.channelMerger.connect(this.compressor),this.compressor.connect(this.output)):(this.input.connect(this.output),this.channelMerger.connect(this.output))},e.prototype._getChannelFrequency=function(e){var t,n;return n=this.beatFrequency/2,t=0===e?this.frequency-n:this.frequency+n},e.prototype.getChannel=function(e){return 0===e?this.leftChannel:1===e?this.rightChannel:void 0},e.prototype.setFrequency=function(e){return this.frequency=e,this.leftChannel.frequency.value=this._getChannelFrequency(0),this.rightChannel.frequency.value=this._getChannelFrequency(1)},e.prototype.setBeatFrequency=function(e){return this.beatFrequency=e,this.setFrequency(this.frequency)},e.prototype.setWaveType=function(e){return this.waveType=e,this.leftChannel.type=this.rightChannel.type=this.waveType},e.prototype.setWaveTable=function(e){return this.leftChannel.setWaveTable(e),this.rightChannel.setWaveTable(e)},e.prototype.start=function(e){return e=null!=e?e:0,this.leftChannel.start(e),this.rightChannel.start(e)},e.prototype.stop=function(e){return e=null!=e?e:0,this.leftChannel.stop(e),this.rightChannel.stop(e)},e.prototype.connect=function(e){return this.output.connect(e.input?e.input:e)},e.prototype.disconnect=function(){return this.output.disconnect()},e}()}).call(this);